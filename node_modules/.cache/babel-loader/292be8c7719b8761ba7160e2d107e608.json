{"ast":null,"code":"var _jsxFileName = \"/Users/lchen/Documents/CODE/vizCode/air-pollution/src/App.js\";\n// import sampleData from \"./data/covids.json\";\nimport './index.css';\nimport fullData from \"./data/full.json\";\nimport janData from \"./data/jan.json\";\nimport febData from \"./data/feb.json\";\nimport marchData from \"./data/mar.json\";\nimport aprilData from \"./data/apr.json\";\nimport mayData from \"./data/may.json\";\nimport juneData from \"./data/jun.json\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { StaticMap } from \"react-map-gl\";\nimport DeckGL from \"@deck.gl/react\";\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\nimport { HexagonLayer } from \"@deck.gl/aggregation-layers\";\nimport { Typography } from \"antd\";\nimport { Statistic } from \"antd\";\nimport { CSSTransition } from 'react-transition-group';\nconst {\n  Title,\n  Text\n} = Typography; // Set your mapbox access token here\n\nconst mapboxApiAccessToken = \"pk.eyJ1IjoidmVyYTFrIiwiYSI6ImNrZjQ3aWJoczA4ZGQydm43cXFjcW5peTkifQ.sYJ99dX7B8QyPgV_-TszTA\"; // public token URL\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\nconst pointLight1 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-0.144528, 49.739968, 80000]\n});\nconst pointLight2 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-3.807751, 54.104682, 8000]\n});\nconst lightingEffect = new LightingEffect({\n  ambientLight,\n  pointLight1,\n  pointLight2\n});\nconst material = {\n  ambient: 0.64,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [51, 51, 51]\n};\nconst INITIAL_VIEW_STATE = {\n  longitude: 90.0,\n  latitude: 40.0,\n  zoom: 4,\n  minZoom: 2,\n  maxZoom: 15,\n  pitch: 40.5,\n  bearing: -27\n};\nexport const colorRange = [[1, 152, 189], [73, 227, 206], [216, 254, 181], [254, 237, 177], [254, 173, 84], [209, 55, 78]];\n/**\n \n  [${randomData} * x / 255, 120, 255]\n */\n\nexport const heatmapColorRange = [[255, 255, 178], [254, 217, 118], [254, 178, 76], [253, 141, 60], [240, 59, 32], [189, 0, 38]];\n\nfunction getTooltip({\n  object\n}) {\n  if (!object) {\n    return null;\n  }\n\n  console.log(object);\n  const lat = object.position[1];\n  const lng = object.position[0];\n  const airQ = object.colorValue;\n  const infectionCount = object.elevationValue / 10000;\n  return `\\\n    Latitude: ${Number.isFinite(lat) ? lat.toFixed(6) : \"\"}\n    Longitude: ${Number.isFinite(lng) ? lng.toFixed(6) : \"\"}\n    Air Quality: ${airQ} \n    Number of Infections: ${infectionCount} `;\n}\n\nfunction getInfectionsCount(data) {\n  var count = 0;\n\n  for (var i = 0; i < data.length; i++) {\n    count += data[i].infections;\n  }\n\n  return count;\n}\n\nexport default function App({\n  intensity = 1,\n  threshold = 0.1,\n  radiusPixels = 30,\n  mapStyle = \"mapbox://styles/mapbox/dark-v9\",\n  coverage = 1\n}) {\n  // USESTATES FOR DATA AND VISUALIZATION\n  const [data, setData] = useState(mayData);\n  const [airPollutant, setAirPollutant] = useState(\"AQI\");\n  const [month, setMonth] = useState(\"ALL\");\n\n  const updateAll = () => setData(fullData);\n\n  const updateJan = () => setData(janData);\n\n  const updateFeb = () => setData(febData);\n\n  const updateMarch = () => setData(marchData);\n\n  const updateApril = () => setData(aprilData);\n\n  const updateMay = () => setData(mayData);\n\n  const updateJune = () => setData(juneData);\n\n  const changeToCO = () => setAirPollutant(\"CO\");\n\n  const changeToCH4 = () => setAirPollutant(\"CH4\");\n\n  const changetoO3 = () => setAirPollutant(\"O3\"); // NAVBAR FUNCTIONS\n\n\n  function Navbar(props) {\n    return /*#__PURE__*/React.createElement(\"nav\", {\n      className: \"navbar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }\n    }, props.children));\n  }\n\n  function NavItem(props) {\n    const [open, setOpen] = useState(false);\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"nav-item\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      className: \"icon-button\",\n      onClick: () => setOpen(!open),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, props.icon), open && props.children);\n  }\n\n  function DropdownMenu() {\n    const [activeMenu, setActiveMenu] = useState('main');\n    const [menuHeight, setMenuHeight] = useState(null);\n    const dropdownRef = useRef(null);\n    useEffect(() => {\n      var _dropdownRef$current;\n\n      setMenuHeight((_dropdownRef$current = dropdownRef.current) === null || _dropdownRef$current === void 0 ? void 0 : _dropdownRef$current.firstChild.offsetHeight);\n    }, []);\n\n    function calcHeight(el) {\n      const height = el.offsetHeight;\n      setMenuHeight(height);\n    }\n\n    function DropdownItem(props) {\n      return /*#__PURE__*/React.createElement(\"a\", {\n        href: \"#\",\n        className: \"menu-item\",\n        onClick: () => props.goToMenu && setActiveMenu(props.goToMenu),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-button\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 11\n        }\n      }, props.leftIcon), props.children, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }\n      }, props.rightIcon));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdown\",\n      style: {\n        height: menuHeight\n      },\n      ref: dropdownRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CSSTransition, {\n      in: activeMenu === 'main',\n      timeout: 500,\n      classNames: \"menu-primary\",\n      unmountOnExit: true,\n      onEnter: calcHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"\\u2699\",\n      goToMenu: \"time\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, \"Change Time Range\"), /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"\\u2601\",\n      goToMenu: \"airPollutant\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, \"Change Air Pollutant\"))), /*#__PURE__*/React.createElement(CSSTransition, {\n      in: activeMenu === 'time',\n      timeout: 500,\n      classNames: \"menu-secondary\",\n      unmountOnExit: true,\n      onEnter: calcHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      goToMenu: \"main\",\n      leftIcon: \"\\u25C0\\uFE0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, \"Go Back\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateAll,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"\\u2713\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, \"All\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateJan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"J\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }, \"Jan\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateFeb,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }, \"Feb\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateMarch,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"M\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    }, \"March\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateApril,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"A\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }, \"April\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateMay,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"M\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }, \"May\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: updateJune,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"J\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 15\n      }\n    }, \"June\")))), /*#__PURE__*/React.createElement(CSSTransition, {\n      in: activeMenu === 'airPollutant',\n      timeout: 500,\n      classNames: \"menu-secondary\",\n      unmountOnExit: true,\n      onEnter: calcHeight,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      goToMenu: \"main\",\n      leftIcon: \"\\u25C0\\uFE0F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 15\n      }\n    }, \"Go Back\")), /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"AQI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, \"Air Quality Index (Xsort)\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: changeToCH4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"CH4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }\n    }, \"Methane\"), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: changetoO3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"O3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }\n    }, \"Ozone\")), /*#__PURE__*/React.createElement(\"div\", {\n      onClick: changeToCO,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DropdownItem, {\n      leftIcon: \"CO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, \"Carbon\")))));\n  } // LAYERS\n\n\n  const layers = [new HexagonLayer({\n    id: \"hexagon\",\n    colorRange,\n    coverage,\n    data,\n    elevationRange: [0, 20000],\n    elevationScale: 100,\n    extruded: true,\n    getElevationValue: d => d.reduce((sum, point) => sum + point[\"infections\"], 0) * 10000,\n    getPosition: d => [d.COORDINATES[0], d.COORDINATES[1]],\n    getColorValue: d => d.reduce((sum, point) => sum + point[\"CO\"], 0) / d.length,\n    pickable: true,\n    radius: 10000,\n    material\n  })];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      backgroundColor: \"#B9B6B5\",\n      zIndex: \"1000\",\n      position: \"absolute\",\n      marginTop: \"40.0%\",\n      right: \"1.5%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"160px\",\n      width: \"300px\",\n      paddingLeft: \"20px\",\n      paddingRight: \"20px\",\n      paddingTop: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 9\n    }\n  }, \"Air Pollution Safety Index\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-evenly\",\n      paddingTop: \"7px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 9\n    }\n  }, colorRange.map(color => /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: \"16.666677%\",\n      height: \"18px\",\n      backgroundColor: `rgb(${color[0]}, ${color[1]}, ${color[2]})`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"legend-text\",\n    style: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      paddingTop: \"6px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 11\n    }\n  }, \"ppm\"), /*#__PURE__*/React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 341,\n      columnNumber: 11\n    }\n  }, \"ppm\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      paddingTop: \"7px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Statistic, {\n    title: \"Total Covid-19 Infections: \",\n    value: getInfectionsCount(data),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      zIndex: \"1000\",\n      right: \"0.0%\",\n      position: \"absolute\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    icon: \"\\u21A1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropdownMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      zIndex: \"-1\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(DeckGL, {\n    effects: [lightingEffect],\n    initialViewState: INITIAL_VIEW_STATE,\n    controller: true,\n    layers: layers,\n    getTooltip: getTooltip,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StaticMap, {\n    reuseMaps: true,\n    mapStyle: mapStyle,\n    preventStyleDiffing: true,\n    mapboxApiAccessToken: mapboxApiAccessToken,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/Users/lchen/Documents/CODE/vizCode/air-pollution/src/App.js"],"names":["fullData","janData","febData","marchData","aprilData","mayData","juneData","React","useState","useEffect","useRef","StaticMap","DeckGL","AmbientLight","PointLight","LightingEffect","HexagonLayer","Typography","Statistic","CSSTransition","Title","Text","mapboxApiAccessToken","ambientLight","color","intensity","pointLight1","position","pointLight2","lightingEffect","material","ambient","diffuse","shininess","specularColor","INITIAL_VIEW_STATE","longitude","latitude","zoom","minZoom","maxZoom","pitch","bearing","colorRange","heatmapColorRange","getTooltip","object","console","log","lat","lng","airQ","colorValue","infectionCount","elevationValue","Number","isFinite","toFixed","getInfectionsCount","data","count","i","length","infections","App","threshold","radiusPixels","mapStyle","coverage","setData","airPollutant","setAirPollutant","month","setMonth","updateAll","updateJan","updateFeb","updateMarch","updateApril","updateMay","updateJune","changeToCO","changeToCH4","changetoO3","Navbar","props","children","NavItem","open","setOpen","icon","DropdownMenu","activeMenu","setActiveMenu","menuHeight","setMenuHeight","dropdownRef","current","firstChild","offsetHeight","calcHeight","el","height","DropdownItem","goToMenu","leftIcon","rightIcon","layers","id","elevationRange","elevationScale","extruded","getElevationValue","d","reduce","sum","point","getPosition","COORDINATES","getColorValue","pickable","radius","backgroundColor","zIndex","marginTop","right","display","flexDirection","width","paddingLeft","paddingRight","paddingTop","alignItems","justifyContent","map"],"mappings":"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","sourcesContent":["// import sampleData from \"./data/covids.json\";\nimport './index.css';\nimport fullData from \"./data/full.json\";\nimport janData from \"./data/jan.json\";\nimport febData from \"./data/feb.json\";\nimport marchData from \"./data/mar.json\";\nimport aprilData from \"./data/apr.json\";\nimport mayData from \"./data/may.json\";\nimport juneData from \"./data/jun.json\";\nimport React, { useState, useEffect, useRef} from \"react\";\nimport \"antd/dist/antd.css\";\nimport { StaticMap } from \"react-map-gl\";\nimport DeckGL from \"@deck.gl/react\";\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\nimport { HexagonLayer } from \"@deck.gl/aggregation-layers\";\nimport { Typography } from \"antd\";\nimport { Statistic } from \"antd\";\nimport { CSSTransition } from 'react-transition-group'\n\nconst { Title, Text } = Typography;\n\n\n// Set your mapbox access token here\nconst mapboxApiAccessToken =\n  \"pk.eyJ1IjoidmVyYTFrIiwiYSI6ImNrZjQ3aWJoczA4ZGQydm43cXFjcW5peTkifQ.sYJ99dX7B8QyPgV_-TszTA\"; // public token URL\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\n\nconst pointLight1 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-0.144528, 49.739968, 80000]\n});\n\nconst pointLight2 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-3.807751, 54.104682, 8000]\n});   \n\nconst lightingEffect = new LightingEffect({ambientLight, pointLight1, pointLight2});\n\nconst material = {\n  ambient: 0.64,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [51, 51, 51]\n};\n\nconst INITIAL_VIEW_STATE = {\n  longitude: 90.0,\n  latitude: 40.0,\n  zoom: 4,\n  minZoom: 2,\n  maxZoom: 15,\n  pitch: 40.5,\n  bearing: -27\n};\n\nexport const colorRange = [\n  [1, 152, 189],\n  [73, 227, 206],\n  [216, 254, 181],\n  [254, 237, 177],\n  [254, 173, 84],\n  [209, 55, 78]\n];\n/**\n \n  [${randomData} * x / 255, 120, 255]\n */\nexport const heatmapColorRange = [\n  [255, 255, 178],\n  [254, 217, 118],\n  [254, 178, 76],\n  [253, 141, 60],\n  [240, 59, 32],\n  [189, 0, 38],\n];\n\n\nfunction getTooltip({ object }) {\n  if (!object) {\n    return null;\n  }\n  console.log(object);\n  const lat = object.position[1];\n  const lng = object.position[0];\n  const airQ = object.colorValue;\n  const infectionCount = object.elevationValue / 10000;\n\n  return `\\\n    Latitude: ${Number.isFinite(lat) ? lat.toFixed(6) : \"\"}\n    Longitude: ${Number.isFinite(lng) ? lng.toFixed(6) : \"\"}\n    Air Quality: ${airQ} \n    Number of Infections: ${infectionCount} `;\n}\n\nfunction getInfectionsCount(data) {\n  var count = 0;\n  for (var i = 0; i < data.length; i++) {\n\n    count += data[i].infections;\n  }\n  return count;\n}\n\nexport default function App({\n  intensity = 1,\n  threshold = 0.1,\n  radiusPixels = 30,\n  mapStyle = \"mapbox://styles/mapbox/dark-v9\",\n  coverage = 1,\n}) {\n  // USESTATES FOR DATA AND VISUALIZATION\n  const [data, setData] = useState(mayData);\n  const [airPollutant, setAirPollutant] = useState(\"AQI\");\n  const [month, setMonth] = useState(\"ALL\");\n\n  const updateAll = () => setData(fullData);\n  const updateJan = () => setData(janData);\n  const updateFeb = () => setData(febData);\n  const updateMarch = () => setData(marchData);\n  const updateApril = () => setData(aprilData);\n  const updateMay = () => setData(mayData);\n  const updateJune = () => setData(juneData);\n\n  const changeToCO = () => setAirPollutant(\"CO\");\n  const changeToCH4 = () => setAirPollutant(\"CH4\");\n  const changetoO3 = () => setAirPollutant(\"O3\");\n\n// NAVBAR FUNCTIONS\n\n  function Navbar(props) {\n    return (\n      <nav className=\"navbar\">\n        <ul className=\"navbar-nav\">{props.children}</ul>\n      </nav>\n    );\n  }\n\n  function NavItem(props) {\n    const [open, setOpen] = useState(false);\n\n    return (\n      <li className=\"nav-item\">\n        <a href=\"#\" className=\"icon-button\" onClick={() => setOpen(!open)}>\n          {props.icon}\n        </a>\n        {open && props.children}\n      </li>\n    );\n  }\n\n  function DropdownMenu() {\n    const [activeMenu, setActiveMenu] = useState('main');\n    const [menuHeight, setMenuHeight] = useState(null);\n    const dropdownRef = useRef(null);\n\n    useEffect(() => {\n      setMenuHeight(dropdownRef.current?.firstChild.offsetHeight)\n    }, [])\n\n    function calcHeight(el) {\n      const height = el.offsetHeight;\n      setMenuHeight(height);\n    }\n\n    function DropdownItem(props) {\n      return (\n        <a href=\"#\" className=\"menu-item\" onClick={() => props.goToMenu && setActiveMenu(props.goToMenu)}>\n          <span className=\"icon-button\">{props.leftIcon}</span>\n          {props.children}\n          <span className=\"icon-right\">{props.rightIcon}</span>\n        </a>\n      );\n    }\n    return (\n      <div className=\"dropdown\" style={{ height: menuHeight }} ref={dropdownRef}>\n\n        <CSSTransition\n          in={activeMenu === 'main'}\n          timeout={500}\n          classNames=\"menu-primary\"\n          unmountOnExit\n          onEnter={calcHeight}>\n          <div className=\"menu\">\n            <DropdownItem\n              leftIcon=\"⚙\"\n              goToMenu=\"time\">\n              Change Time Range\n            </DropdownItem>\n            <DropdownItem\n              leftIcon=\"☁\"\n              goToMenu=\"airPollutant\">\n              Change Air Pollutant\n            </DropdownItem>\n\n          </div>\n        </CSSTransition>\n\n        <CSSTransition\n          in={activeMenu === 'time'}\n          timeout={500}\n          classNames=\"menu-secondary\"\n          unmountOnExit\n          onEnter={calcHeight}>\n          <div className=\"menu\">\n            <DropdownItem goToMenu=\"main\" leftIcon=\"◀️\">\n              Go Back\n            </DropdownItem>\n            <div onClick={updateAll}>\n              <DropdownItem leftIcon=\"✓\">All</DropdownItem>\n            </div>\n            <div onClick={updateJan}>\n              <DropdownItem leftIcon=\"J\">Jan</DropdownItem>\n            </div>\n            <div onClick={updateFeb}>\n              <DropdownItem leftIcon=\"F\">Feb</DropdownItem>\n            </div>\n            <div onClick={updateMarch}>\n              <DropdownItem leftIcon=\"M\">March</DropdownItem>\n            </div>\n            <div onClick={updateApril}>\n              <DropdownItem leftIcon=\"A\">April</DropdownItem>\n            </div>\n            <div onClick={updateMay}>\n              <DropdownItem leftIcon=\"M\">May</DropdownItem>\n            </div>\n            <div onClick={updateJune}>\n              <DropdownItem leftIcon=\"J\">June</DropdownItem>  \n            </div>\n          </div>\n        </CSSTransition>\n\n        <CSSTransition\n          in={activeMenu === 'airPollutant'}\n          timeout={500}\n          classNames=\"menu-secondary\"\n          unmountOnExit\n          onEnter={calcHeight}>\n          <div className=\"menu\">\n            <DropdownItem goToMenu=\"main\" leftIcon=\"◀️\">\n              <p>Go Back</p>\n            </DropdownItem>\n            \n            <DropdownItem leftIcon=\"AQI\">Air Quality Index (Xsort)</DropdownItem>\n            <div onClick={changeToCH4}></div>\n            <DropdownItem leftIcon=\"CH4\">Methane</DropdownItem>\n            <div onClick={changetoO3}>\n            <DropdownItem leftIcon=\"O3\">Ozone</DropdownItem>\n            </div>\n            <div onClick={changeToCO}>\n            <DropdownItem leftIcon=\"CO\">Carbon</DropdownItem>\n            </div>\n          </div>\n        </CSSTransition>\n      </div>\n    );\n  }\n\n// LAYERS\n  const layers = [\n      new HexagonLayer({\n      id: \"hexagon\",\n      colorRange,\n      coverage,\n      data,\n      elevationRange: [0, 20000],\n      elevationScale: 100,\n      extruded: true,\n      getElevationValue: (d) => d.reduce((sum, point) => sum + point[\"infections\"], 0) * 10000,\n      getPosition: (d) => [d.COORDINATES[0], d.COORDINATES[1]],\n      getColorValue: (d) => d.reduce((sum, point) => sum + point.[\"CO\"], 0) / d.length,\n      pickable: true,\n      radius: 10000,\n      material,\n    })\n  ];\n\n  return (\n    <div>\n      <div\n        style={{\n          backgroundColor: \"#B9B6B5\",\n          zIndex: \"1000\",\n          position: \"absolute\",\n          marginTop: \"40.0%\",\n          right: \"1.5%\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          height: \"160px\",\n          width: \"300px\",\n          paddingLeft: \"20px\",\n          paddingRight: \"20px\",\n          paddingTop: \"10px\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\", \n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n          }}>\n        <Text>Air Pollution Safety Index</Text>\n        </div>\n        <div\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"space-evenly\",\n            paddingTop: \"7px\",\n          }}\n        >\n          {colorRange.map((color) => (\n                <div\n                  style={{\n                    width: \"16.666677%\",\n                    height: \"18px\",\n                    backgroundColor: `rgb(${color[0]}, ${color[1]}, ${color[2]})`,\n                  }}\n                />\n              ))}\n        </div>\n        <div\n          className=\"legend-text\"\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n            paddingTop: \"6px\",\n          }}\n        >\n          <Text>ppm</Text>\n          <Text>ppm</Text>\n        </div>\n        <div style={{ paddingTop: \"7px\" }}>\n          <Statistic title=\"Total Covid-19 Infections: \" value={getInfectionsCount(data)} />\n        </div>\n      </div>\n      <div\n        style={{\n          zIndex: \"1000\",\n          right: \"0.0%\",\n          position: \"absolute\",\n        }}\n      >\n        <Navbar>\n          <NavItem icon=\"↡\">\n            <DropdownMenu/>\n          </NavItem>\n        </Navbar>\n      </div>\n      <div\n        style={{\n          zIndex: \"-1\",\n        }}\n      >\n        <DeckGL\n          effects={[lightingEffect]}\n          initialViewState={INITIAL_VIEW_STATE}\n          controller={true}\n          layers={layers}\n          getTooltip={getTooltip}\n        >\n          <StaticMap\n            reuseMaps\n            mapStyle={mapStyle}\n            preventStyleDiffing={true}\n            mapboxApiAccessToken={mapboxApiAccessToken}\n          />\n        </DeckGL>\n      </div>\n    </div>\n\n  );\n}\n"]},"metadata":{},"sourceType":"module"}