{"ast":null,"code":"var _jsxFileName = \"/Users/lchen/Documents/CODE/vizCode/air-pollution/src/App.js\";\n// import sampleData from \"./data/covids.json\";\nimport './index.css';\nimport sampleData from \"./data/data.json\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"antd/dist/antd.css\";\nimport { StaticMap } from \"react-map-gl\";\nimport DeckGL from \"@deck.gl/react\";\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\nimport { HexagonLayer } from \"@deck.gl/aggregation-layers\";\nimport { message, Typography } from \"antd\";\nimport { Statistic } from \"antd\";\nimport { Divider } from \"antd\";\nimport { Menu } from \"antd\";\nimport { CSSTransition } from 'react-transition-group'; // import RangeInput from \"./range-input\";\n\nconst {\n  Title,\n  Text\n} = Typography; // Set your mapbox access token here\n\nconst mapboxApiAccessToken = \"pk.eyJ1IjoidmVyYTFrIiwiYSI6ImNrZjQ3aWJoczA4ZGQydm43cXFjcW5peTkifQ.sYJ99dX7B8QyPgV_-TszTA\"; // eslint-disable-line\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\nconst pointLight1 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-0.144528, 49.739968, 80000]\n});\nconst pointLight2 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-3.807751, 54.104682, 8000]\n});\nconst lightingEffect = new LightingEffect({\n  ambientLight,\n  pointLight1,\n  pointLight2\n});\nconst material = {\n  ambient: 0.64,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [51, 51, 51]\n};\nconst INITIAL_VIEW_STATE = {\n  longitude: -122,\n  latitude: 38,\n  zoom: 6,\n  minZoom: 2,\n  maxZoom: 15,\n  pitch: 40.5,\n  bearing: -27\n};\nexport const colorRange = [[1, 152, 189], [73, 227, 206], [216, 254, 181], [254, 237, 177], [254, 173, 84], [209, 55, 78]];\n/**\n \n  [${randomData} * x / 255, 120, 255]\n */\n\nexport const heatmapColorRange = [[255, 255, 178], [254, 217, 118], [254, 178, 76], [253, 141, 60], [240, 59, 32], [189, 0, 38]];\n\nfunction getTooltip({\n  object\n}) {\n  if (!object) {\n    return null;\n  }\n\n  console.log(object);\n  const lat = object.position[1];\n  const lng = object.position[0];\n  const airQ = object.colorValue;\n  const infectionCount = object.elevationValue;\n  return `\\\n    Latitude: ${Number.isFinite(lat) ? lat.toFixed(6) : \"\"}\n    Longitude: ${Number.isFinite(lng) ? lng.toFixed(6) : \"\"}\n    Air Quality: ${airQ} \n    Number of Infections: ${infectionCount} `;\n}\n\nfunction getInfectionsCount(data) {\n  var count = 0;\n\n  for (var i = 0; i < data.length; i++) {\n    count += data[i].infections;\n  }\n\n  return count;\n}\n\nexport default function App({\n  intensity = 1,\n  threshold = 0.1,\n  radiusPixels = 30,\n  mapStyle = \"mapbox://styles/mapbox/dark-v9\",\n  coverage = 1\n}) {\n  const [elevationIndex, setElevationIndex] = useState(\"COVID\");\n  const [data, setData] = useState(sampleData);\n  const elevationIndexMenu = /*#__PURE__*/React.createElement(Menu, {\n    onClick: changeElevationIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"Covid-19 Infections\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, \"Covid-19 Infections\"), /*#__PURE__*/React.createElement(Menu.Item, {\n    key: \"Temperatures\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }\n  }, \"Temperatures\"));\n\n  function changeElevationIndex(e) {\n    setElevationIndex(e.key);\n    message.success(\"Currently showing: \" + e.key, 1);\n  } // O3 CO\n\n\n  const layers = [new HexagonLayer({\n    id: \"hexagon\",\n    colorRange,\n    coverage,\n    data,\n    elevationRange: [0, 1000],\n    elevationScale: 50,\n    extruded: true,\n    getElevationValue: d => d.reduce((sum, point) => sum + point[\"infections\"], 0) * 1000,\n    getPosition: d => [d.COORDINATES[0], d.COORDINATES[1]],\n    getColorValue: d => d.reduce((sum, point) => sum + point[\"airQuality\"], 0) / d.length,\n    pickable: true,\n    radius: 800,\n    material\n  })];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      zIndex: \"1000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavItem, {\n    icon: \"\\u2B07\\uFE0F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropdownMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  })))));\n}\n\nfunction Navbar(props) {\n  return /*#__PURE__*/React.createElement(\"nav\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"navbar-nav\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, props.children));\n}\n\nfunction NavItem(props) {\n  const [open, setOpen] = useState(false);\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"#\",\n    className: \"icon-button\",\n    onClick: () => setOpen(!open),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, props.icon), open && props.children);\n}\n\nfunction DropdownMenu() {\n  const [activeMenu, setActiveMenu] = useState('main');\n  const [menuHeight, setMenuHeight] = useState(null);\n  const dropdownRef = useRef(null);\n  useEffect(() => {\n    var _dropdownRef$current;\n\n    setMenuHeight((_dropdownRef$current = dropdownRef.current) === null || _dropdownRef$current === void 0 ? void 0 : _dropdownRef$current.firstChild.offsetHeight);\n  }, []);\n\n  function calcHeight(el) {\n    const height = el.offsetHeight;\n    setMenuHeight(height);\n  }\n\n  function DropdownItem(props) {\n    return /*#__PURE__*/React.createElement(\"a\", {\n      href: \"#\",\n      className: \"menu-item\",\n      onClick: () => props.goToMenu && setActiveMenu(props.goToMenu),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }, props.leftIcon), props.children, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, props.rightIcon));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dropdown\",\n    style: {\n      height: menuHeight\n    },\n    ref: dropdownRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CSSTransition, {\n    in: activeMenu === 'main',\n    timeout: 500,\n    classNames: \"menu-primary\",\n    unmountOnExit: true,\n    onEnter: calcHeight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\\uD83E\\uDD22/\\uD83D\\uDD25\",\n    goToMenu: \"settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Change to Covid-19 Infections or Temperatures\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\\u2601\",\n    goToMenu: \"airPollutant\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, \"Change Air Pollutant\"))), /*#__PURE__*/React.createElement(CSSTransition, {\n    in: activeMenu === 'settings',\n    timeout: 500,\n    classNames: \"menu-secondary\",\n    unmountOnExit: true,\n    onEnter: calcHeight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    goToMenu: \"main\",\n    leftIcon: \"\\u27A1\\uFE0F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }\n  }, \"Go Back\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\\u26A1\\uFE0F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  }, \"Click to change to temperature\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\\u26A1\\uFE0F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 11\n    }\n  }, \"Click to change to COVID-19 infections\"))), /*#__PURE__*/React.createElement(CSSTransition, {\n    in: activeMenu === 'airPollutant',\n    timeout: 500,\n    classNames: \"menu-secondary\",\n    unmountOnExit: true,\n    onEnter: calcHeight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"menu\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DropdownItem, {\n    goToMenu: \"main\",\n    leftIcon: \"\\u27A1\\uFE0F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }, \"Go Back\")), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 11\n    }\n  }, \"Jan\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, \"Feb\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }, \"March\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }\n  }, \"April\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 11\n    }\n  }, \"May\"), /*#__PURE__*/React.createElement(DropdownItem, {\n    leftIcon: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 11\n    }\n  }, \"June\"))));\n}","map":{"version":3,"sources":["/Users/lchen/Documents/CODE/vizCode/air-pollution/src/App.js"],"names":["sampleData","React","useState","useEffect","useRef","StaticMap","DeckGL","AmbientLight","PointLight","LightingEffect","HexagonLayer","message","Typography","Statistic","Divider","Menu","CSSTransition","Title","Text","mapboxApiAccessToken","ambientLight","color","intensity","pointLight1","position","pointLight2","lightingEffect","material","ambient","diffuse","shininess","specularColor","INITIAL_VIEW_STATE","longitude","latitude","zoom","minZoom","maxZoom","pitch","bearing","colorRange","heatmapColorRange","getTooltip","object","console","log","lat","lng","airQ","colorValue","infectionCount","elevationValue","Number","isFinite","toFixed","getInfectionsCount","data","count","i","length","infections","App","threshold","radiusPixels","mapStyle","coverage","elevationIndex","setElevationIndex","setData","elevationIndexMenu","changeElevationIndex","e","key","success","layers","id","elevationRange","elevationScale","extruded","getElevationValue","d","reduce","sum","point","getPosition","COORDINATES","getColorValue","pickable","radius","zIndex","Navbar","props","children","NavItem","open","setOpen","icon","DropdownMenu","activeMenu","setActiveMenu","menuHeight","setMenuHeight","dropdownRef","current","firstChild","offsetHeight","calcHeight","el","height","DropdownItem","goToMenu","leftIcon","rightIcon"],"mappings":";AAAA;AACA,OAAO,aAAP;AACA,OAAOA,UAAP,MAAuB,kBAAvB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAkD,OAAlD;AACA,OAAO,oBAAP;AACA,SAASC,SAAT,QAA0B,cAA1B;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,SAASC,YAAT,EAAuBC,UAAvB,EAAmCC,cAAnC,QAAyD,eAAzD;AACA,SAASC,YAAT,QAA6B,6BAA7B;AACA,SAASC,OAAT,EAAkBC,UAAlB,QAAoC,MAApC;AACA,SAASC,SAAT,QAA0B,MAA1B;AACA,SAASC,OAAT,QAAwB,MAAxB;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,SAASC,aAAT,QAA8B,wBAA9B,C,CACA;;AACA,MAAM;AAAEC,EAAAA,KAAF;AAASC,EAAAA;AAAT,IAAkBN,UAAxB,C,CAGA;;AACA,MAAMO,oBAAoB,GACxB,0FADF,C,CAC8F;;AAE9F,MAAMC,YAAY,GAAG,IAAIb,YAAJ,CAAiB;AACpCc,EAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAD6B;AAEpCC,EAAAA,SAAS,EAAE;AAFyB,CAAjB,CAArB;AAKA,MAAMC,WAAW,GAAG,IAAIf,UAAJ,CAAe;AACjCa,EAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAD0B;AAEjCC,EAAAA,SAAS,EAAE,GAFsB;AAGjCE,EAAAA,QAAQ,EAAE,CAAC,CAAC,QAAF,EAAY,SAAZ,EAAuB,KAAvB;AAHuB,CAAf,CAApB;AAMA,MAAMC,WAAW,GAAG,IAAIjB,UAAJ,CAAe;AACjCa,EAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAD0B;AAEjCC,EAAAA,SAAS,EAAE,GAFsB;AAGjCE,EAAAA,QAAQ,EAAE,CAAC,CAAC,QAAF,EAAY,SAAZ,EAAuB,IAAvB;AAHuB,CAAf,CAApB;AAMA,MAAME,cAAc,GAAG,IAAIjB,cAAJ,CAAmB;AAACW,EAAAA,YAAD;AAAeG,EAAAA,WAAf;AAA4BE,EAAAA;AAA5B,CAAnB,CAAvB;AAEA,MAAME,QAAQ,GAAG;AACfC,EAAAA,OAAO,EAAE,IADM;AAEfC,EAAAA,OAAO,EAAE,GAFM;AAGfC,EAAAA,SAAS,EAAE,EAHI;AAIfC,EAAAA,aAAa,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT;AAJA,CAAjB;AAOA,MAAMC,kBAAkB,GAAG;AACzBC,EAAAA,SAAS,EAAE,CAAC,GADa;AAEzBC,EAAAA,QAAQ,EAAE,EAFe;AAGzBC,EAAAA,IAAI,EAAE,CAHmB;AAIzBC,EAAAA,OAAO,EAAE,CAJgB;AAKzBC,EAAAA,OAAO,EAAE,EALgB;AAMzBC,EAAAA,KAAK,EAAE,IANkB;AAOzBC,EAAAA,OAAO,EAAE,CAAC;AAPe,CAA3B;AAUA,OAAO,MAAMC,UAAU,GAAG,CACxB,CAAC,CAAD,EAAI,GAAJ,EAAS,GAAT,CADwB,EAExB,CAAC,EAAD,EAAK,GAAL,EAAU,GAAV,CAFwB,EAGxB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAHwB,EAIxB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAJwB,EAKxB,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CALwB,EAMxB,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CANwB,CAAnB;AAQP;;;;;AAIA,OAAO,MAAMC,iBAAiB,GAAG,CAC/B,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAD+B,EAE/B,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAF+B,EAG/B,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CAH+B,EAI/B,CAAC,GAAD,EAAM,GAAN,EAAW,EAAX,CAJ+B,EAK/B,CAAC,GAAD,EAAM,EAAN,EAAU,EAAV,CAL+B,EAM/B,CAAC,GAAD,EAAM,CAAN,EAAS,EAAT,CAN+B,CAA1B;;AAUP,SAASC,UAAT,CAAoB;AAAEC,EAAAA;AAAF,CAApB,EAAgC;AAC9B,MAAI,CAACA,MAAL,EAAa;AACX,WAAO,IAAP;AACD;;AACDC,EAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACA,QAAMG,GAAG,GAAGH,MAAM,CAACnB,QAAP,CAAgB,CAAhB,CAAZ;AACA,QAAMuB,GAAG,GAAGJ,MAAM,CAACnB,QAAP,CAAgB,CAAhB,CAAZ;AACA,QAAMwB,IAAI,GAAGL,MAAM,CAACM,UAApB;AACA,QAAMC,cAAc,GAAGP,MAAM,CAACQ,cAA9B;AAEA,SAAQ;gBACMC,MAAM,CAACC,QAAP,CAAgBP,GAAhB,IAAuBA,GAAG,CAACQ,OAAJ,CAAY,CAAZ,CAAvB,GAAwC,EAAG;iBAC1CF,MAAM,CAACC,QAAP,CAAgBN,GAAhB,IAAuBA,GAAG,CAACO,OAAJ,CAAY,CAAZ,CAAvB,GAAwC,EAAG;mBACzCN,IAAK;4BACIE,cAAe,GAJzC;AAKD;;AAGD,SAASK,kBAAT,CAA4BC,IAA5B,EAAkC;AAChC,MAAIC,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAEpCD,IAAAA,KAAK,IAAID,IAAI,CAACE,CAAD,CAAJ,CAAQE,UAAjB;AACD;;AACD,SAAOH,KAAP;AACD;;AAED,eAAe,SAASI,GAAT,CAAa;AAC1BvC,EAAAA,SAAS,GAAG,CADc;AAE1BwC,EAAAA,SAAS,GAAG,GAFc;AAG1BC,EAAAA,YAAY,GAAG,EAHW;AAI1BC,EAAAA,QAAQ,GAAG,gCAJe;AAK1BC,EAAAA,QAAQ,GAAG;AALe,CAAb,EAMZ;AACD,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCjE,QAAQ,CAAC,OAAD,CAApD;AACA,QAAM,CAACsD,IAAD,EAAOY,OAAP,IAAkBlE,QAAQ,CAACF,UAAD,CAAhC;AAEA,QAAMqE,kBAAkB,gBACtB,oBAAC,IAAD;AAAM,IAAA,OAAO,EAAEC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,GAAG,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,eAEE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,GAAG,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFF,CADF;;AAOA,WAASA,oBAAT,CAA8BC,CAA9B,EAAiC;AAC/BJ,IAAAA,iBAAiB,CAACI,CAAC,CAACC,GAAH,CAAjB;AACA7D,IAAAA,OAAO,CAAC8D,OAAR,CAAgB,wBAAwBF,CAAC,CAACC,GAA1C,EAA+C,CAA/C;AACD,GAdA,CAgBH;;;AACE,QAAME,MAAM,GAAG,CACP,IAAIhE,YAAJ,CAAiB;AACjBiE,IAAAA,EAAE,EAAE,SADa;AAEjBnC,IAAAA,UAFiB;AAGjByB,IAAAA,QAHiB;AAIjBT,IAAAA,IAJiB;AAKjBoB,IAAAA,cAAc,EAAE,CAAC,CAAD,EAAI,IAAJ,CALC;AAMjBC,IAAAA,cAAc,EAAE,EANC;AAOjBC,IAAAA,QAAQ,EAAE,IAPO;AAQjBC,IAAAA,iBAAiB,EAAGC,CAAD,IAAOA,CAAC,CAACC,MAAF,CAAS,CAACC,GAAD,EAAMC,KAAN,KAAgBD,GAAG,GAAGC,KAAK,CAAC,YAAD,CAApC,EAAoD,CAApD,IAAyD,IARlE;AASjBC,IAAAA,WAAW,EAAGJ,CAAD,IAAO,CAACA,CAAC,CAACK,WAAF,CAAc,CAAd,CAAD,EAAmBL,CAAC,CAACK,WAAF,CAAc,CAAd,CAAnB,CATH;AAUjBC,IAAAA,aAAa,EAAGN,CAAD,IAAOA,CAAC,CAACC,MAAF,CAAS,CAACC,GAAD,EAAMC,KAAN,KAAgBD,GAAG,GAAGC,KAAK,CAAC,YAAD,CAApC,EAAoD,CAApD,IAAyDH,CAAC,CAACrB,MAVhE;AAWjB4B,IAAAA,QAAQ,EAAE,IAXO;AAYjBC,IAAAA,MAAM,EAAE,GAZS;AAajB7D,IAAAA;AAbiB,GAAjB,CADO,CAAf;AAkBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AACE,IAAA,KAAK,EAAE;AACL8D,MAAAA,MAAM,EAAE;AADH,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CALF,CAFF,CADF;AAkBD;;AAED,SAASC,MAAT,CAAgBC,KAAhB,EAAuB;AACrB,sBACE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,YAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4BA,KAAK,CAACC,QAAlC,CADF,CADF;AAKD;;AAED,SAASC,OAAT,CAAiBF,KAAjB,EAAwB;AACtB,QAAM,CAACG,IAAD,EAAOC,OAAP,IAAkB7F,QAAQ,CAAC,KAAD,CAAhC;AAEA,sBACE;AAAI,IAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,IAAI,EAAC,GAAR;AAAY,IAAA,SAAS,EAAC,aAAtB;AAAoC,IAAA,OAAO,EAAE,MAAM6F,OAAO,CAAC,CAACD,IAAF,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGH,KAAK,CAACK,IADT,CADF,EAKGF,IAAI,IAAIH,KAAK,CAACC,QALjB,CADF;AASD;;AAED,SAASK,YAAT,GAAwB;AACtB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BjG,QAAQ,CAAC,MAAD,CAA5C;AACA,QAAM,CAACkG,UAAD,EAAaC,aAAb,IAA8BnG,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAMoG,WAAW,GAAGlG,MAAM,CAAC,IAAD,CAA1B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AAAA;;AACdkG,IAAAA,aAAa,yBAACC,WAAW,CAACC,OAAb,yDAAC,qBAAqBC,UAArB,CAAgCC,YAAjC,CAAb;AACD,GAFQ,EAEN,EAFM,CAAT;;AAIA,WAASC,UAAT,CAAoBC,EAApB,EAAwB;AACtB,UAAMC,MAAM,GAAGD,EAAE,CAACF,YAAlB;AACAJ,IAAAA,aAAa,CAACO,MAAD,CAAb;AACD;;AAED,WAASC,YAAT,CAAsBlB,KAAtB,EAA6B;AAC3B,wBACE;AAAG,MAAA,IAAI,EAAC,GAAR;AAAY,MAAA,SAAS,EAAC,WAAtB;AAAkC,MAAA,OAAO,EAAE,MAAMA,KAAK,CAACmB,QAAN,IAAkBX,aAAa,CAACR,KAAK,CAACmB,QAAP,CAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+BnB,KAAK,CAACoB,QAArC,CADF,EAEGpB,KAAK,CAACC,QAFT,eAGE;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA8BD,KAAK,CAACqB,SAApC,CAHF,CADF;AAOD;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAA0B,IAAA,KAAK,EAAE;AAAEJ,MAAAA,MAAM,EAAER;AAAV,KAAjC;AAAyD,IAAA,GAAG,EAAEE,WAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,aAAD;AACE,IAAA,EAAE,EAAEJ,UAAU,KAAK,MADrB;AAEE,IAAA,OAAO,EAAE,GAFX;AAGE,IAAA,UAAU,EAAC,cAHb;AAIE,IAAA,aAAa,MAJf;AAKE,IAAA,OAAO,EAAEQ,UALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AACE,IAAA,QAAQ,EAAC,2BADX;AAEE,IAAA,QAAQ,EAAC,UAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDADF,eAME,oBAAC,YAAD;AACE,IAAA,QAAQ,EAAC,QADX;AAEE,IAAA,QAAQ,EAAC,cAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BANF,CANF,CAFF,eAuBE,oBAAC,aAAD;AACE,IAAA,EAAE,EAAER,UAAU,KAAK,UADrB;AAEE,IAAA,OAAO,EAAE,GAFX;AAGE,IAAA,UAAU,EAAC,gBAHb;AAIE,IAAA,aAAa,MAJf;AAKE,IAAA,OAAO,EAAEQ,UALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,MAAvB;AAA8B,IAAA,QAAQ,EAAC,cAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAIE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAJF,eAKE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CALF,CANF,CAvBF,eAsCE,oBAAC,aAAD;AACE,IAAA,EAAE,EAAER,UAAU,KAAK,cADrB;AAEE,IAAA,OAAO,EAAE,GAFX;AAGE,IAAA,UAAU,EAAC,gBAHb;AAIE,IAAA,aAAa,MAJf;AAKE,IAAA,OAAO,EAAEQ,UALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,MAAvB;AAA8B,IAAA,QAAQ,EAAC,cAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CADF,eAIE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJF,eAKE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WALF,eAME,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aANF,eAOE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAPF,eAQE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WARF,eASE,oBAAC,YAAD;AAAc,IAAA,QAAQ,EAAC,EAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YATF,CANF,CAtCF,CADF;AA2DD","sourcesContent":["// import sampleData from \"./data/covids.json\";\nimport './index.css';\nimport sampleData from \"./data/data.json\";\nimport React, { useState, useEffect, useRef} from \"react\";\nimport \"antd/dist/antd.css\";\nimport { StaticMap } from \"react-map-gl\";\nimport DeckGL from \"@deck.gl/react\";\nimport { AmbientLight, PointLight, LightingEffect } from \"@deck.gl/core\";\nimport { HexagonLayer } from \"@deck.gl/aggregation-layers\";\nimport { message, Typography } from \"antd\";\nimport { Statistic } from \"antd\";\nimport { Divider } from \"antd\";\nimport { Menu } from \"antd\";\nimport { CSSTransition } from 'react-transition-group'\n// import RangeInput from \"./range-input\";\nconst { Title, Text } = Typography;\n\n\n// Set your mapbox access token here\nconst mapboxApiAccessToken =\n  \"pk.eyJ1IjoidmVyYTFrIiwiYSI6ImNrZjQ3aWJoczA4ZGQydm43cXFjcW5peTkifQ.sYJ99dX7B8QyPgV_-TszTA\"; // eslint-disable-line\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\n\nconst pointLight1 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-0.144528, 49.739968, 80000]\n});\n\nconst pointLight2 = new PointLight({\n  color: [255, 255, 255],\n  intensity: 0.8,\n  position: [-3.807751, 54.104682, 8000]\n});   \n\nconst lightingEffect = new LightingEffect({ambientLight, pointLight1, pointLight2});\n\nconst material = {\n  ambient: 0.64,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [51, 51, 51]\n};\n\nconst INITIAL_VIEW_STATE = {\n  longitude: -122,\n  latitude: 38,\n  zoom: 6,\n  minZoom: 2,\n  maxZoom: 15,\n  pitch: 40.5,\n  bearing: -27\n};\n\nexport const colorRange = [\n  [1, 152, 189],\n  [73, 227, 206],\n  [216, 254, 181],\n  [254, 237, 177],\n  [254, 173, 84],\n  [209, 55, 78]\n];\n/**\n \n  [${randomData} * x / 255, 120, 255]\n */\nexport const heatmapColorRange = [\n  [255, 255, 178],\n  [254, 217, 118],\n  [254, 178, 76],\n  [253, 141, 60],\n  [240, 59, 32],\n  [189, 0, 38],\n];\n\n\nfunction getTooltip({ object }) {\n  if (!object) {\n    return null;\n  }\n  console.log(object);\n  const lat = object.position[1];\n  const lng = object.position[0];\n  const airQ = object.colorValue;\n  const infectionCount = object.elevationValue;\n\n  return `\\\n    Latitude: ${Number.isFinite(lat) ? lat.toFixed(6) : \"\"}\n    Longitude: ${Number.isFinite(lng) ? lng.toFixed(6) : \"\"}\n    Air Quality: ${airQ} \n    Number of Infections: ${infectionCount} `;\n}\n\n\nfunction getInfectionsCount(data) {\n  var count = 0;\n  for (var i = 0; i < data.length; i++) {\n\n    count += data[i].infections;\n  }\n  return count;\n}\n\nexport default function App({\n  intensity = 1,\n  threshold = 0.1,\n  radiusPixels = 30,\n  mapStyle = \"mapbox://styles/mapbox/dark-v9\",\n  coverage = 1,\n}) {\n  const [elevationIndex, setElevationIndex] = useState(\"COVID\");\n  const [data, setData] = useState(sampleData);\n\n  const elevationIndexMenu = (\n    <Menu onClick={changeElevationIndex}>\n      <Menu.Item key=\"Covid-19 Infections\">Covid-19 Infections</Menu.Item>\n      <Menu.Item key=\"Temperatures\">Temperatures</Menu.Item>\n    </Menu>\n  )\n  \n  function changeElevationIndex(e) {\n    setElevationIndex(e.key);\n    message.success(\"Currently showing: \" + e.key, 1);\n  }\n\n// O3 CO\n  const layers = [\n          new HexagonLayer({\n          id: \"hexagon\",\n          colorRange,\n          coverage,\n          data,\n          elevationRange: [0, 1000],\n          elevationScale: 50,\n          extruded: true,\n          getElevationValue: (d) => d.reduce((sum, point) => sum + point[\"infections\"], 0) * 1000,\n          getPosition: (d) => [d.COORDINATES[0], d.COORDINATES[1]],\n          getColorValue: (d) => d.reduce((sum, point) => sum + point[\"airQuality\"], 0) / d.length,\n          pickable: true,\n          radius: 800,\n          material,\n        })\n  ];\n\n  return (\n    <div>\n\n      <div\n        style={{\n          zIndex: \"1000\",\n        }}\n      >\n        <Navbar>\n          <NavItem icon=\"⬇️\">\n            <DropdownMenu/>\n          </NavItem>\n\n        </Navbar>\n      </div>\n    </div>\n\n  );\n}\n\nfunction Navbar(props) {\n  return (\n    <nav className=\"navbar\">\n      <ul className=\"navbar-nav\">{props.children}</ul>\n    </nav>\n  );\n}\n\nfunction NavItem(props) {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <li className=\"nav-item\">\n      <a href=\"#\" className=\"icon-button\" onClick={() => setOpen(!open)}>\n        {props.icon}\n      </a>\n\n      {open && props.children}\n    </li>\n  );\n}\n\nfunction DropdownMenu() {\n  const [activeMenu, setActiveMenu] = useState('main');\n  const [menuHeight, setMenuHeight] = useState(null);\n  const dropdownRef = useRef(null);\n\n  useEffect(() => {\n    setMenuHeight(dropdownRef.current?.firstChild.offsetHeight)\n  }, [])\n\n  function calcHeight(el) {\n    const height = el.offsetHeight;\n    setMenuHeight(height);\n  }\n\n  function DropdownItem(props) {\n    return (\n      <a href=\"#\" className=\"menu-item\" onClick={() => props.goToMenu && setActiveMenu(props.goToMenu)}>\n        <span className=\"icon-button\">{props.leftIcon}</span>\n        {props.children}\n        <span className=\"icon-right\">{props.rightIcon}</span>\n      </a>\n    );\n  }\n\n  return (\n    <div className=\"dropdown\" style={{ height: menuHeight }} ref={dropdownRef}>\n\n      <CSSTransition\n        in={activeMenu === 'main'}\n        timeout={500}\n        classNames=\"menu-primary\"\n        unmountOnExit\n        onEnter={calcHeight}>\n        <div className=\"menu\">\n          <DropdownItem\n            leftIcon=\"🤢/🔥\"\n            goToMenu=\"settings\">\n            Change to Covid-19 Infections or Temperatures\n          </DropdownItem>\n          <DropdownItem\n            leftIcon=\"☁\"\n            goToMenu=\"airPollutant\">\n            Change Air Pollutant\n          </DropdownItem>\n\n        </div>\n      </CSSTransition>\n\n      <CSSTransition\n        in={activeMenu === 'settings'}\n        timeout={500}\n        classNames=\"menu-secondary\"\n        unmountOnExit\n        onEnter={calcHeight}>\n        <div className=\"menu\">\n          <DropdownItem goToMenu=\"main\" leftIcon=\"➡️\">\n            Go Back\n          </DropdownItem>\n          <DropdownItem leftIcon=\"⚡️\">Click to change to temperature</DropdownItem>\n          <DropdownItem leftIcon=\"⚡️\">Click to change to COVID-19 infections</DropdownItem>\n        </div>\n      </CSSTransition>\n\n      <CSSTransition\n        in={activeMenu === 'airPollutant'}\n        timeout={500}\n        classNames=\"menu-secondary\"\n        unmountOnExit\n        onEnter={calcHeight}>\n        <div className=\"menu\">\n          <DropdownItem goToMenu=\"main\" leftIcon=\"➡️\">\n            <p>Go Back</p>\n          </DropdownItem>\n          <DropdownItem leftIcon=\"\">Jan</DropdownItem>\n          <DropdownItem leftIcon=\"\">Feb</DropdownItem>\n          <DropdownItem leftIcon=\"\">March</DropdownItem>\n          <DropdownItem leftIcon=\"\">April</DropdownItem>\n          <DropdownItem leftIcon=\"\">May</DropdownItem>\n          <DropdownItem leftIcon=\"\">June</DropdownItem>\n        </div>\n      </CSSTransition>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}